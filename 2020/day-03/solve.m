

% T = [ '..##.......' ; ...
%       '#...#...#..' ; ...
%       '.#....#..#.' ; ...
%       '..#.#...#.#' ; ...
%       '.#...##..#.' ; ...
%       '..#.##.....' ; ...
%       '.#.#.#....#' ; ...
%       '.#........#' ; ...
%       '#.##...#...' ; ...
%       '#...##....#' ; ...
%       '.#..#...#.#' ] == '#';

T = cell2mat( splitlines( fileread( 'data.in' ) ) ) == '#';

[ N, M ] = size( T );

%%

trees = @(x,y) sum( T( (1:x:N) + N*mod( 0:y:(N-1)*y/x, M ) ) );

disp( trees( 1, 3 ) );

%%

disp( prod( [ trees(1,1) trees(1,3) trees(1,5) trees(1,7) trees(2,1)  ] ) );
